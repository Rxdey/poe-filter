import{a as H,c as L,_ as T,t as q}from"./Load-cc4c7cf8.js";import{a as z,u as F,C as J}from"./Card-77f1c9e6.js";import{_ as B,r as u,w as I,e as v,o as g,j as $,h as d,f as r,k as s,a as e,E as O,p as M,l as R,b as j,x as A,c as b,z as G,s as W,F as N,i as Y,g as K,G as Q,u as X,y as Z}from"./index-1d1db870.js";const C=m=>(M("data-v-2ad16918"),m=m(),R(),m),ee={class:"tip"},oe=C(()=>e("p",null,"每个赛季命运卡池会有些许变化，本项目完全离线，所有需要自行添加更新",-1)),ae=C(()=>e("p",null,[s("点击此链接前往编年史 "),e("a",{href:"https://poedb.tw/cn/Divination_Cards#命运卡物品",target:"_blank"},"流亡编年史#命运卡物品 ")],-1)),le=C(()=>e("p",null,[s("页面加载完毕后，按"),e("span",{class:"code"},"F12"),s("或者右键页面选择"),e("span",{class:"code"},"检查")],-1)),te=C(()=>e("p",null,[s("弹出页面选择"),e("span",{class:"code"},"控制台"),s("(英文界面选择"),e("span",{class:"code"},"console"),s(")")],-1)),se=C(()=>e("p",null,"点击下面复制按钮，复制代码在上面编年史页面控制台粘贴并回车",-1)),ne=C(()=>e("p",null,"然后粘贴到下面的文本框保存...",-1)),ce={__name:"SaveCardPool",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(m,{emit:y}){const f=m,t=u(f.modelValue),n=u(""),h=()=>{H(z,()=>{O.success("已复制，请根据提示操作")})},S=()=>{try{const a=JSON.parse(n.value);L.setItem("CARD_POOL",a),O.success("已保存，页面将会自动刷新"),t.value=!1,setTimeout(()=>{window.location.reload()},1e3)}catch(a){console.log(a),O.error("数据不正确")}};return I(()=>f.modelValue,a=>{t.value=a}),I(()=>t.value,a=>{y("update:modelValue",a)}),(a,i)=>{const V=v("el-button"),x=v("el-input"),P=v("el-dialog");return g(),$(P,{modelValue:t.value,"onUpdate:modelValue":i[1]||(i[1]=c=>t.value=c),title:"更新命运卡池",class:"update-card-dialog"},{footer:d(()=>[r(V,{round:"",type:"danger",plain:"",onClick:S},{default:d(()=>[s("保存")]),_:1})]),default:d(()=>[e("div",ee,[oe,ae,le,te,se,e("p",null,[r(V,{round:"",plain:"",onClick:h},{default:d(()=>[s("复制")]),_:1})]),ne,r(x,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=c=>n.value=c),rows:5,type:"textarea",placeholder:"在此处粘贴结果"},null,8,["modelValue"])])]),_:1},8,["modelValue"])}}},ue=B(ce,[["__scopeId","data-v-2ad16918"]]);const re={class:"home destiny"},de={class:"card-wrap"},ie={class:"card-main"},_e={class:"search"},pe={class:"car-all-list"},ve={__name:"destinyView",setup(m){const y=F(),f=u(""),t=u(!1),n=u(!1),h=u(1),S=u(50),a=u([]),i=u(!1),V=l=>{if(n.value=!0,l=l.trim(),!l){h.value=1,a.value=[],c();return}a.value=y.allCardList.filter(o=>{var p;return((p=o.name)==null?void 0:p.search(l))>-1||q(o.id).toUpperCase()===l.toUpperCase()||o.explicitMod.some(w=>{var k;return((k=w.value)==null?void 0:k.search(l))>-1})})},x=()=>{h.value=1,a.value=[],f.value="",t.value=!0,c()},P=({page:l=1,pagesize:o=10})=>JSON.parse(JSON.stringify(y.allCardList)).slice((l-1)*o,o*l),c=async()=>{const l=P({page:h.value,pagesize:S.value});t.value=!0,a.value=a.value.concat(l),h.value+=1,n.value=l.length<S.value,t.value=!1,Q(()=>{const o=document.querySelector("#car-all").scrollHeight,p=document.querySelector("#car-all").offsetHeight;o<=p&&!n.value&&!n.value&&c()})},D=l=>{if(t.value||n.value)return;const o=document.querySelector("#car-all").offsetHeight;document.querySelector("#car-all").scrollHeight-o<=l.target.scrollTop+30&&(t.value=!0,c())};return j(()=>{t.value=!0,c()}),(l,o)=>{const p=v("el-input"),w=v("el-col"),k=v("el-button"),U=v("el-row"),E=A("loading");return g(),b(N,null,[e("div",re,[e("div",de,[e("div",ie,[e("div",_e,[r(U,{aligin:"center"},{default:d(()=>[r(w,{span:6},{default:d(()=>[r(p,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=_=>f.value=_),placeholder:"输入关键词搜索(卡片名、奖励名)","suffix-icon":X(Z),onInput:V,size:"large"},null,8,["modelValue","suffix-icon"])]),_:1}),r(w,{span:2,offset:1},{default:d(()=>[r(k,{round:"",plain:"",onClick:o[1]||(o[1]=_=>i.value=!0)},{default:d(()=>[s("更新卡池")]),_:1})]),_:1})]),_:1})]),G((g(),b("div",{class:"card-all",id:"car-all",onScroll:D,style:W({"overflow-y":t.value?"hidden":"auto"})},[e("div",pe,[(g(!0),b(N,null,Y(a.value,(_,me)=>(g(),$(J,{key:_.type,name:_.id,icon:"Check",color:"#67c23a",onOnCardClick:l.onSelected,selected:_.selected||!1},null,8,["name","onOnCardClick","selected"]))),128)),a.value.length?K("",!0):(g(),$(T,{key:0,onClick:x},{default:d(()=>[s("没有了, 点我重新加载吧")]),_:1}))])],36)),[[E,t.value]])])])]),r(ue,{modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=_=>i.value=_)},null,8,["modelValue"])],64)}}},Ce=B(ve,[["__scopeId","data-v-70938fec"]]);export{Ce as default};
